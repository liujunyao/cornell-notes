# 笔记列表页面功能说明 (v2.0)

## 更新说明（v2.0）

采用 Tab 标签页设计，将"最近编辑"和"按分类"分离为两种独立查找模式，使结构更清晰合理。

## 功能概览

笔记列表页面（`pages/notes.html`）采用两种视图模式，支持灵活的笔记组织和查找。

## 功能列表

### 1. **两种查找模式**

#### 模式 A：最近编辑（📅 Recent View）
- **默认视图**：展示最近编辑的笔记
- **适用场景**：快速找到最近操作的笔记
- **特点**：
  - 按编辑时间倒序排列
  - 无需分类管理
  - 支持笔记操作（移动、复制、删除）
  - 不显示"新建分类"按钮

#### 模式 B：按分类（📁 Category View）
- **分类管理**：通过分类组织笔记
- **适用场景**：系统化管理大量笔记
- **特点**：
  - 显示所有分类及其笔记
  - 支持新建分类（`+` 按钮）
  - 支持分类和笔记操作
  - 每个分类可独立管理

### 2. **Tab 切换**
页面顶部的 Tab 标签页：
```
📅 最近编辑 | 📁 按分类
```
- **紧凑设计**：只占用最小空间
- **流畅动画**：过渡平滑
- **视觉反馈**：激活Tab下方有蓝色边框

### 3. **分类操作**（仅在"按分类"模式下）

#### 新建分类
- **按钮**：标题栏右侧的 `+` 按钮
- **功能**：弹出模态框创建新分类
- **快捷键**：`Enter` 提交

#### 分类管理
每个分类标题悬停时显示操作按钮：
- **➕ 新建笔记**：在当前分类下创建笔记
- **⋮ 更多操作**：右键菜单
  - 新建笔记
  - 重命名分类
  - 删除分类

### 4. **笔记操作**（两种模式都支持）
每个笔记项悬停时显示 `⋮` 按钮，点击显示上下文菜单：
- **📄 打开**：编辑笔记
- **📁 移动到...**：移动到其他分类（仅按分类模式）
- **📋 复制**：复制笔记
- **🗑️ 删除**：删除笔记

## 界面布局

### 最近编辑模式
```
我的笔记            [+隐藏]
📅 最近编辑 | 📁 按分类
🔍 搜索笔记...
─────────────────────
康奈尔笔记法介绍  [⋮]
5R 笔记法详解     [⋮]
主动学习策略      [⋮]
Python 基础语法   [⋮]
数据结构：链表    [⋮]
```

### 按分类模式
```
我的笔记            [+]
📅 最近编辑 | 📁 按分类
🔍 搜索笔记...
─────────────────────
📚 学习笔记    12  [➕][⋮]
  Python 基础语法  [⋮]
  数据结构：链表   [⋮]

💼 项目管理     8  [➕][⋮]
  敏捷开发方法论  [⋮]
  Scrum 框架详解  [⋮]
```

## 交互细节

### Tab 切换逻辑
```javascript
最近编辑 Tab
  ├─ 激活状态：显示最近笔记列表
  ├─ 操作按钮：隐藏"新建分类"
  └─ 笔记操作：支持移动、复制、删除

按分类 Tab
  ├─ 激活状态：显示分类和笔记
  ├─ 操作按钮：显示"新建分类"
  └─ 分类操作：支持新建、重命名、删除
```

### 上下文菜单
- **触发**：点击分类或笔记的 `⋮` 按钮
- **关闭**：点击页面其他区域自动关闭
- **位置**：跟随鼠标点击位置显示

### 模态框
- **类型**：
  1. 新建分类
  2. 重命名分类
  3. 移动笔记
- **关闭方式**：
  - 点击"取消"按钮
  - 点击模态框背景
- **提交方式**：
  - 点击"确定"按钮
  - 按 `Enter` 键

## CSS 类名说明

### Tab 样式
- `.view-tabs` - Tab 容器
- `.view-tab` - Tab 项
- `.view-tab.active` - 激活 Tab（蓝色底边）

### 视图容器
- `.view-content` - 内容视图（通过 `display` 控制显示/隐藏）
- `.view-content[data-view="recent"]` - 最近编辑视图
- `.view-content[data-view="category"]` - 按分类视图

### 其他类（与 v1.0 相同）
- `.category-section` - 分类容器
- `.category-header` - 分类标题
- `.note-list-item` - 笔记项
- `.context-menu` - 上下文菜单
- `.modal` - 模态框

## JavaScript 关键逻辑

### Tab 切换函数
```javascript
function switchView(view) {
  // 1. 更新 Tab 样式
  // 2. 显示/隐藏"新建分类"按钮
  // 3. 切换视图内容
  // 4. 更新全局状态
}

currentView // 当前活跃视图（'recent' 或 'category'）
```

### 初始化
```javascript
// 页面加载时
- 默认显示"最近编辑"视图
- 隐藏"新建分类"按钮
- 激活"最近编辑" Tab
```

## 使用示例

### 查看最近编辑笔记
1. 打开笔记列表页面
2. 确保"📅 最近编辑" Tab 激活（默认）
3. 笔记按编辑时间倒序显示

### 在分类下新建笔记
1. 点击"📁 按分类" Tab
2. 找到目标分类
3. 点击分类右侧的 `➕` 按钮
4. 跳转到编辑器并在该分类下创建笔记

### 移动笔记到其他分类
1. 在"按分类"模式中
2. 悬停到要移动的笔记
3. 点击 `⋮` → 选择"移动到..."
4. 选择目标分类 → 确认

### 创建新分类
1. 切换到"📁 按分类" Tab
2. 点击标题栏右侧的 `+` 按钮
3. 输入分类名称
4. 按 `Enter` 或点击"确定"

## 响应式行为

- **桌面/平板（≥768px）**：显示完整功能
- **移动端（<768px）**：
  - 隐藏左侧导航栏
  - Tab 按钮等宽显示
  - 笔记列表占满屏幕

## 性能优化

- **视图切换**：使用 CSS `display` 控制，避免 DOM 重排
- **事件委托**：使用事件委托减少事件监听器数量
- **内存管理**：无内存泄漏，正确清理事件监听

## 文件变更

### 修改的文件
- `pages/notes.html`：新增 Tab 切换、视图管理

### 新增元素
```html
<div class="view-tabs">
  <button class="view-tab active" data-view="recent">📅 最近编辑</button>
  <button class="view-tab" data-view="category">📁 按分类</button>
</div>

<div class="view-content" data-view="recent">...</div>
<div class="view-content" data-view="category">...</div>
```

## 可视化对比

| 特性 | v1.0 | v2.0 |
|-----|------|------|
| 视图模式 | 单一混合 | 两种独立 |
| "最近编辑" | 分类显示 | Tab 独立 |
| "按分类" | 与最近混合 | Tab 独立 |
| 新建分类按钮 | 始终显示 | 条件显示 |
| 结构清晰度 | 一般 | 优秀 |
| 占用空间 | 稍大 | 最小化 |

## 后续优化方向

1. **Tab 记忆**：记住用户最后的视图选择
2. **拖拽排序**：支持笔记在分类间拖拽
3. **批量操作**：多选笔记进行批量操作
4. **键盘快捷键**：
   - `Ctrl/Cmd + N` 新建笔记
   - `Ctrl/Cmd + K` 搜索
   - `Esc` 关闭菜单/模态框

---

**更新时间**：2026-01-29
**版本**：v2.0
**改进**：采用 Tab 切换模式，改进结构清晰度

