# 康奈尔笔记应用 - 功能模块与用户流程

基于系统设计文档和产品需求，本文档详细描述各功能模块的用户流程、交互路径、以及与原型设计的对应关系。

## 一、核心功能模块分层

### 1. 基础模块（P0 - V1.0核心必做）

#### 1.1 用户认证与账号管理
**核心流程：** 首次访问 → 注册/登录 → 个人设置 → 进入首页

**用户角色**
- 普通学生：仅操作个人笔记，可查看分享的笔记
- 教师：创建班级，分发模板，批改笔记，查看学生复习进度
- 家长：绑定学生账号，查看笔记和复习情况（无编辑权限）
- 管理员：后台管理（V2.0+ 功能）

**交互流程**
```
首次打开App
  ├─ 若已登录 → 跳转首页
  └─ 若未登录 ↓
    ├─ 选择"注册新账号" →
    │   ├─ 选择注册方式（手机/邮箱/微信/QQ/Apple ID）
    │   ├─ 输入账号信息 → 验证码验证
    │   ├─ 设置密码 → 选择角色（学生/教师/家长）
    │   └─ 完成注册 → 进入首页（自动登录）
    └─ 选择"登录已有账号" →
        ├─ 输入账号+密码 / 三方OAuth
        ├─ (可选) 生物识别验证（指纹/面容）
        └─ 登录成功 → 进入首页
```

**对应原型页面**
- 登录/注册页（全屏表单，P0）
- 身份验证页（二次验证选项，P0）
- 个人设置页（角色选择+基础信息，P0）

---

#### 1.2 首页与笔记列表管理

**核心流程：** 首页展示 → 快速新建 → 笔记浏览 → 操作管理

**信息架构**
```
首页
├─ 顶部导航栏
│  ├─ 搜索框（全文检索）
│  └─ 快捷新建按钮
├─ 快捷入口区
│  ├─ 最近编辑（最近7天，3-5项）
│  ├─ 待复习（基于艾宾浩斯曲线，≤3项）
│  └─ 收藏笔记（用户标星，显示5项）
├─ 分类&笔记列表
│  ├─ 按分类&时间组织
│  └─ 卡片视图：标题+编辑时间+标签
└─ 底部导航栏（首页/复习/协作/我的）
```

**关键交互**
1. **搜索框**：输入关键词 → 实时联想结果 → 点击进入笔记
2. **快捷新建**：点击+按钮 → 进入三分栏编辑页（空白笔记）
3. **笔记卡片长按**：弹出菜单（分享/删除/标星/修改标签）
4. **笔记卡片点击**：进入笔记编辑页

**对应原型页面**
- 首页（P0，含搜索+快捷入口+列表）
- 搜索结果页（P0，实时联想）
- 笔记操作菜单（P0，浮动弹窗）

---

#### 1.3 核心笔记编辑（三分栏布局）

**核心流程：** 进入编辑页 → 标题&分类 → 内容编辑 → 自动保存

**信息架构**
```
笔记编辑页（三分栏布局）
├─ 顶部：笔记标题 + 操作栏（保存/返回/AI功能/分享）
├─ 中部（三栏）
│  ├─ 线索栏（左侧，25%宽度）
│  │  ├─ 关键词输入区
│  │  ├─ 高亮索引条（快速跳转）
│  │  └─ AI提炼按钮
│  ├─ 笔记栏（右侧，75%宽度）
│  │  ├─ 富文本编辑区（工具栏悬浮）
│  │  ├─ 支持多媒体插入（图片/视频/音频）
│  │  ├─ 公式编辑器（LaTeX）
│  │  └─ 高亮管理（5类预设）
│  └─ 总结栏（底部，20%高度）
│     ├─ 核心提炼输入区
│     ├─ 待解决问题输入区
│     └─ AI生成按钮
└─ 实时保存状态指示（右上角）
```

**编辑功能详解**

1. **富文本编辑工具栏**（悬浮式，鼠标悬停显示）
   - 基础格式：加粗、斜体、下划线、删除线
   - 列表：有序列表、无序列表、任务清单
   - 插入：图片、链接、代码块、表格
   - 高亮：5类预设高亮（核心知识点/重点问题/关键案例/反思心得/警示易错点）
   - AI功能：AI自动高亮、AI拓展、AI排版

2. **高亮管理**
   - 选中内容 → 点击高亮按钮 → 选择高亮类型（5类色彩对应）
   - 右侧自动生成"高亮索引条"，点击可跳转
   - 支持批量修改/取消高亮

3. **多媒体支持**
   - 图片：本地导入/拍照/截图，支持拖拽插入
   - 视频/音频：本地导入，支持实时录音
   - 公式：点击公式按钮 → 可视化编辑器或LaTeX语法

4. **自动保存**
   - 本地保存：每输入1个字自动保存（本地存储）
   - 云同步：30秒同步一次到后端
   - 草稿恢复：断网时显示离线编辑提示，联网后自动同步

**关键交互路径**
```
笔记编辑
├─ 输入标题 → 自动保存
├─ 选择分类/标签 → 自动保存
├─ 编辑三栏内容
│  ├─ 笔记栏：富文本编辑 + 高亮 + 多媒体插入
│  ├─ 线索栏：手动输入 或 AI提炼（从笔记栏）
│  └─ 总结栏：手动输入 或 AI生成
├─ 点击"AI功能"
│  ├─ 线索栏："AI提炼" → 生成关键词建议 → 导入 → 修改
│  ├─ 笔记栏："AI高亮" → 自动标记 → 手动调整
│  └─ 总结栏："AI生成" → 生成总结初稿 → 导入 → 补充
└─ 右上角显示"已保存"提示 + 保存时间
```

**对应原型页面**
- 笔记编辑页（P0，三栏核心）
- 工具栏菜单（P0，高亮选择、插入菜单）
- AI生成面板（P1，候选内容展示）
- 多媒体插入弹窗（P0，图片/视频/音频）

---

#### 1.4 复习管理（艾宾浩斯曲线）

**核心流程：** 笔记保存 → 自动生成复习计划 → 复习提醒 → 进入复习

**复习计划生成逻辑**
```
笔记保存
  ↓
自动生成复习节点（基于艾宾浩斯曲线）：
  - 当天（第1次复习）
  - 第2天
  - 第7天
  - 第15天
  - 第30天
  ↓
推送提醒（到达对应时间）
  ├─ APP推送（首选）
  ├─ 邮件提醒（可选）
  └─ 短信提醒（付费功能，V2.0+）
  ↓
用户点击提醒 → 进入复习页面
```

**三阶复习模式**

1. **基础模式（遮盖式背诵）**
   - 笔记栏自动遮盖，仅显示线索栏
   - 逐行点击"解锁" → 显示对应笔记内容
   - 完整复述后标记"已掌握"或"未掌握"

2. **进阶模式（AI提问式）**
   - 笔记栏替换为问答框
   - AI根据线索栏生成问题
   - 用户输入答案 → 点击"比对" → 显示标准答案+正确率打分

3. **高阶模式（识别式考验）**
   - 隐藏高亮，显示纯文本
   - 用户自主标记关键内容
   - 与AI标记对比 → 显示差异提示

**复习流程图**
```
复习页面
├─ 显示笔记标题 + 模式切换按钮（基础/进阶/高阶）
├─ 中部：
│  ├─ 基础模式：遮盖笔记栏 + "解锁一行"按钮
│  ├─ 进阶模式：问答输入框 + "比对"按钮
│  └─ 高阶模式：纯文本 + 自主标记工具
├─ 下方操作栏
│  ├─ 上一行/下一行（导航）
│  ├─ 星标（标记薄弱点）
│  └─ 完成复习 → 弹出复习报告
└─ 复习报告（弹窗）
   ├─ 复习时长
   ├─ 正确率
   ├─ 薄弱点列表
   └─ 按钮："已掌握" / "未掌握"
```

**对应原型页面**
- 复习列表页（显示待复习笔记，P1）
- 复习页面-基础模式（P0）
- 复习页面-进阶模式（P1）
- 复习页面-高阶模式（P1）
- 复习报告弹窗（P0）

---

### 2. AI 辅助模块（P1 - V2.0 差异化）

#### 2.1 内容生成与智能优化

**触发点与交互**
```
笔记编辑页 → AI功能按钮 → 选择操作

线索栏AI提炼：
  ├─ 点击线索栏"AI提炼"按钮
  ├─ 系统分析笔记栏内容（1-3秒）
  ├─ 生成3-8个关键词/问题建议
  ├─ 显示在线索栏下方（可编辑区）
  ├─ 用户审核 → 导入到线索栏
  └─ 支持重新生成

笔记栏AI高亮：
  ├─ 点击笔记栏"AI自动高亮"
  ├─ 系统扫描笔记内容（1-3秒）
  ├─ 按5类高亮类型自动标记
  ├─ 用户手动调整/取消高亮
  └─ 支持重新生成

总结栏AI生成：
  ├─ 点击总结栏"AI生成"
  ├─ 系统提取笔记栏+线索栏核心信息（1-3秒）
  ├─ 生成"核心提炼"+待解决点
  ├─ 显示在总结栏（可编辑）
  ├─ 用户补充/修改
  └─ 导入最终版本

知识点拓展：
  ├─ 选中笔记内容 → 右键菜单"AI拓展"
  ├─ 悬浮卡片展示（解释/案例/应用/易错点）
  ├─ 可一键插入笔记栏
  └─ 支持离线基础拓展
```

**AI生成质量控制**
- 生成速度：1-3秒内完成（用户无感知）
- 准确率目标：≥85%（关键词/高亮）、≥92%（拓展内容）
- 个性化学习：记忆用户生成风格偏好（简洁/详细/问题式）
- 可控性：所有AI内容均可编辑/删除，不自动覆盖

**对应原型页面**
- AI操作面板（浮动弹窗，P1）
- AI生成结果展示区（P1，可编辑）
- 知识点拓展卡片（悬浮显示，P1）

---

### 3. 协作与分享模块（P1 - 场景拓展）

#### 3.1 协作编辑

**流程**
```
笔记编辑页 → 点击"协作" → 创建小组/邀请成员

创建小组：
  ├─ 输入小组名称
  ├─ 设置权限（编辑/仅查看/批注）
  ├─ 生成邀请链接/邀请码
  └─ 分享给其他成员

成员加入后：
  ├─ 实时同步编辑内容（冲突自动合并）
  ├─ 显示在线成员头像（右上角）
  ├─ 支持批注与回复
  └─ 记录编辑历史（谁改了什么）
```

**对应原型页面**
- 协作页面（P1，小组列表+创建）
- 协作编辑页面（P1，多人同步编辑）
- 批注面板（P1，实时讨论）

---

#### 3.2 笔记分享与导出

**流程**
```
笔记 → 点击"分享" → 选择方式

分享链接：
  ├─ 选择权限（仅查看/可编辑）
  ├─ 设置有效期（1天/7天/30天/永久）
  ├─ 生成分享链接
  ├─ 复制/分享至第三方（微信/QQ/微博）
  └─ 实时提醒内容更新

导出文件：
  ├─ 选择格式（PDF/Word/图片/思维导图）
  ├─ 设置选项（含高亮/含批注/含反思）
  ├─ 确认 → 后台生成
  ├─ 显示进度 → 下载或分享
  └─ 导出后保留三分栏布局+所有格式
```

**对应原型页面**
- 分享弹窗（P1，选择方式）
- 导出选项对话框（P1，格式选择）

---

## 二、用户角色与权限矩阵

```
功能点          | 普通学生 | 教师 | 家长 | 管理员 |
----------------|---------|------|------|--------|
创建笔记        | ✓       | ✓    | ✗    | ✗     |
编辑自己笔记    | ✓       | ✓    | ✗    | ✗     |
查看分享笔记    | ✓       | ✓    | ✓    | ✓     |
创建班级        | ✗       | ✓    | ✗    | ✓     |
批改笔记        | ✗       | ✓    | ✗    | ✓     |
查看学生进度    | ✗       | ✓    | ✓    | ✓     |
系统管理        | ✗       | ✗    | ✗    | ✓     |
```

---

## 三、用户流程地图（核心场景）

### 场景1：学生课堂记笔记

```
打开App → 首页 → 快速新建 → 笔记编辑页
  ↓
进行课堂记录（笔记栏）
  ├─ 输入笔记内容（文字/图片/代码）
  ├─ 标记重要内容（高亮）
  └─ 实时保存（30秒同步一次）
  ↓
课后补充线索（线索栏）
  ├─ 手动输入关键词和问题 或
  ├─ 点击"AI提炼" → 自动生成建议 → 导入
  └─ 实时保存
  ↓
课后总结（总结栏）
  ├─ 输入核心收获+待解决问题 或
  ├─ 点击"AI生成" → 自动生成初稿 → 修改
  └─ 实时保存
  ↓
笔记保存完成 → 自动生成复习计划
```

### 场景2：定期复习

```
收到复习提醒（APP推送）
  ↓
打开App → 复习页面
  ↓
选择复习模式（基础/进阶/高阶）
  ├─ 基础：遮盖式背诵，逐行解锁
  ├─ 进阶：AI提问，用户作答，自动打分
  └─ 高阶：隐藏高亮，自主标记，对比打分
  ↓
完成复习 → 弹出复习报告（时长/正确率/薄弱点）
  ↓
标记"已掌握"或"未掌握"
  ↓
系统自动调整下次复习时间
```

### 场景3：教师布置作业

```
教师端 → 班级管理页
  ↓
选择笔记模板或新建
  ↓
点击"分发"
  ├─ 选择目标学生或班级
  ├─ 设置截止时间
  ├─ 添加任务说明（可选）
  └─ 发布
  ↓
学生收到通知 → 基于模板新建笔记 → 完成作业
  ↓
教师批改
  ├─ 查看学生笔记
  ├─ 添加批注和建议
  ├─ 打分
  └─ 提交反馈
  ↓
学生收到反馈通知 → 查看教师批注和评分
```

---

## 四、信息架构总体视图

```
App总体结构
├─ 首页 (Home)
│  ├─ 搜索功能
│  ├─ 快捷新建
│  ├─ 快捷入口（最近/待复习/收藏）
│  └─ 笔记列表
│
├─ 笔记编辑 (Editor) - 三分栏核心
│  ├─ 标题&分类设置
│  ├─ 线索栏（关键词区）
│  ├─ 笔记栏（主记录区）
│  ├─ 总结栏（核心浓缩）
│  ├─ 工具栏（编辑/高亮/AI）
│  └─ 自动保存&版本回溯
│
├─ 复习中心 (Review)
│  ├─ 复习清单（待复习/已掌握/薄弱点）
│  ├─ 复习日历（艾宾浩斯计划）
│  ├─ 复习模式（基础/进阶/高阶）
│  └─ 复习报告
│
├─ 协作 (Collaborate)
│  ├─ 小组列表
│  ├─ 协作编辑页面
│  ├─ 批注与讨论
│  └─ 分享&导出
│
└─ 我的 (Profile)
   ├─ 个人信息
   ├─ 笔记管理（我的笔记/收藏/回收站）
   ├─ 学习统计（复习进度/掌握度）
   ├─ 设置（个性化/账号/数据备份）
   └─ 帮助&反馈
```

---

## 五、交互设计原则

1. **快捷性**：核心操作≤2步（如快速新建、进入复习）
2. **自动化**：保存/同步/复习提醒自动处理，无需用户干预
3. **实时反馈**：所有操作立即反馈（加载动画/成功提示）
4. **容错设计**：删除前确认、自动保存、版本回溯
5. **无打扰**：学习模式下无广告、无通知，专注体验优先

---

## 六、适配多端设计

### 移动端（竖屏，375×812px）
- 笔记栏优先显示（占屏90%）
- 线索栏/总结栏通过下拉/上滑展开
- 工具栏简化为图标按钮（仅常用功能）
- 导航栏固定底部

### 平板端（横屏，1024×768px）
- 线索栏可设为侧边抽屉（可收起）
- 笔记栏占主体位置
- 总结栏固定底部
- 工具栏完整显示

### PC端（1920×1080px）
- 三栏平铺，宽度可拖拽调整
- 工具栏完整，支持快捷键
- 右侧可显示复习日历/笔记预览
- 支持分屏（一边看资料，一边记笔记）

---

本文档与原型设计文件配套使用，所有功能流程均对应具体的原型页面和交互标注。
